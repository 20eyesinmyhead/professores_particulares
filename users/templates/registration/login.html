{% extends 'base/base.html' %} 
{% load static %}
{% load custom_tags %} 
<!-- Carrega o filtro add_class -->

{% block title %}Acesso à Conta{% endblock %}

{% block content %}

<!-- Note: Este template usa classes Tailwind CSS -->
<section class="min-h-screen flex items-center justify-center bg-gray-50 p-4 sm:p-6">
    <div class="w-full max-w-md bg-white p-8 rounded-xl shadow-2xl space-y-6 transform transition duration-500 hover:shadow-3xl">
        
        <h2 class="text-3xl font-extrabold text-gray-900 text-center border-b pb-3 mb-6">
            <!-- CORREÇÃO: Ícone cinza escuro -->
            <i class="fas fa-lock mr-2 text-gray-700"></i> Acesso à Conta
        </h2>
        
        <!-- Exibir Mensagens do Django (Success, Error, etc.) -->
        {% if messages %}
            <div class="space-y-3">
                {% for message in messages %}
                    <div class="p-3 text-sm rounded-lg 
                        {% if message.tags == 'error' %} bg-red-100 text-red-700 border border-red-300
                        {% elif message.tags == 'success' %} bg-green-100 text-green-700 border border-green-300
                        {% else %} bg-blue-100 text-blue-700 border border-blue-300 {% endif %}">
                        {{ message }}
                    </div>
                {% endfor %}
            </div>
        {% endif %}

        <form method="post" class="space-y-4">
            {% csrf_token %} 
            
            <!-- Renderiza os campos do formulário (o script abaixo aplica o estilo) -->
            {% for field in form %}
                <div class="group">
                    <label for="{{ field.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-1">
                        {{ field.label }}
                    </label>
                    {{ field }}
                    {% if field.help_text %}
                        <p class="text-xs text-gray-500 mt-1">{{ field.help_text }}</p>
                    {% endif %}
                    {% for error in field.errors %}
                        <p class="text-sm text-red-500 mt-1">{{ error }}</p>
                    {% endfor %}
                </div>
            {% endfor %}
            
            <input type="hidden" name="next" value="{{ next }}">

            <!-- CORREÇÃO: Botão cinza escuro -->
            <button type="submit" class="w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-gray-800 hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 transition duration-150 ease-in-out">
                <i class="fas fa-sign-in-alt mr-2"></i> Entrar na Plataforma
            </button>
        </form>
        
        <div class="text-center pt-4 border-t border-gray-100 mt-6">
            <p class="text-sm text-gray-600 space-y-2">
                <!-- CORREÇÃO: Link de "Esqueceu a senha" (usando a cor de destaque do tema, amarelo) -->
                <a href="{% url 'password_reset' %}" class="font-medium text-yellow-600 hover:text-yellow-500 transition duration-150 ease-in-out block">
                    Esqueceu sua senha?
                </a>
                <span class="block">
                    Novo por aqui? 
                    <!-- CORREÇÃO: Link de "Crie sua conta" (usando a cor de destaque do tema, amarelo) -->
                    <a href="{% url 'users:registro' %}" class="font-medium text-yellow-600 hover:text-yellow-500 transition duration-150 ease-in-out">
                        Crie sua conta
                    </a>
                </span>
            </p>
        </div>
    </div>
</section>

<!-- Script para aplicar classes Tailwind aos inputs do formulário -->
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Seleciona todos os inputs comuns (exceto submit/checkbox), selects e textareas
        const form = document.querySelector('form');
        if (form) {
            form.querySelectorAll('input:not([type="submit"]):not([type="checkbox"]), select, textarea').forEach(el => {
                // CORREÇÃO: Foco para amarelo (cor de destaque do tema)
                el.classList.add('appearance-none', 'block', 'w-full', 'px-3', 'py-2', 'border', 'border-gray-300', 'rounded-lg', 'shadow-sm', 'placeholder-gray-400', 'focus:outline-none', 'focus:ring-yellow-500', 'focus:border-yellow-500', 'sm:text-sm');
            });
        }
    });
</script>

{% endblock content %}